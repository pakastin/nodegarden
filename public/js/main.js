"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();!function(){var t=function(){function t(){_classCallCheck(this,t),this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.mass=0}return _createClass(t,[{key:"update",value:function(){this.x+=this.velocityX,this.y+=this.velocityY}},{key:"reset",value:function(t,e){this.x=Math.random()*t,this.y=Math.random()*e,this.velocityX=1*Math.random()-.5,this.velocityY=1*Math.random()-.5,this.mass=2*Math.random()+1}},{key:"isInvisible",value:function(t,e){return this.x>t+25||this.x<-25||this.y>t+25||this.y<-25}}]),t}(),e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(){var t=this;this.canvas=document.createElement("canvas"),this.canvas.id="nodegarden",1!==window.devicePixelRatio&&(this.canvas.style.transform="scale("+1/window.devicePixelRatio+")",this.canvas.style.transformOrigin="0 0"),document.getElementById("container").appendChild(this.canvas),document.getElementsByClassName("moon")[0].addEventListener("click",function(e){console.log("da"),e.stopPropagation(),console.log("dud"),t.toggleNightMode()}),this._ctx=this.canvas.getContext("2d"),this._ctx.fillStyle="#ffffff",this._nodes=[],this.resize(),window.addEventListener("resize",function(){t.resize()}),window.addEventListener("click",function(e){e.stopPropagation(),t.resetRandomNode(e.pageX,e.pageY)}),this.render()}},{key:"resize",value:function(){this.canvas.width=window.innerWidth*window.devicePixelRatio,this.canvas.height=window.innerHeight*window.devicePixelRatio,this._nodes.length=Math.sqrt(this.canvas.width*this.canvas.height)/25|0;for(var e=0;e<this._nodes.length;e++)if(!this._nodes[e]){var i=new t;i.reset(this.canvas.width,this.canvas.height),this._nodes[e]=i}this.toggleNightMode(),this.toggleNightMode()}},{key:"render",value:function(){var t=this;requestAnimationFrame(function(){t.render()}),this._ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var e=0;e<this._nodes.length-1;e++)for(var i=this._nodes[e],s=e+1;s<this._nodes.length;s++){var n=this._nodes[s],a=n.x-i.x,h=n.y-i.y,o=a*a+h*h;if(!(o>2e4))if(o<(i.mass/2+n.mass/2)*(i.mass/2+n.mass/2)){if(i.mass<=n.mass){i.reset(this.canvas.width,this.canvas.height);continue}n.reset(this.canvas.width,this.canvas.height)}else{var c=3*(i.mass*n.mass)/o,r=100*c,l=Math.sqrt(o),d={x:a/l,y:h/l};this._ctx.beginPath(),this.isNightMode()?this._ctx.strokeStyle="rgba(191,191,191,"+(1>r?r:1)+")":this._ctx.strokeStyle="rgba(63,63,63,"+(1>r?r:1)+")",this._ctx.moveTo(i.x,i.y),this._ctx.lineTo(n.x,n.y),this._ctx.stroke();var v=c*d.x/i.mass,f=c*d.x/i.mass,u=c*d.y/n.mass,g=c*d.y/n.mass;i.velocityX+=v,i.velocityY+=u,n.velocityX-=f,n.velocityY-=g}}this._nodes.forEach(function(e,i){t._ctx.beginPath(),t._ctx.arc(e.x,e.y,e.mass,0,2*Math.PI),t._ctx.fill(),e.update(),e.isInvisible(t.canvas.width,t.canvas.height)&&e.reset(t.canvas.width,t.canvas.height)})}},{key:"toggleNightMode",value:function(){document.body.classList.toggle("nightmode"),this.isNightMode()?this._ctx.fillStyle="#ffffff":this._ctx.fillStyle="#000000"}},{key:"isNightMode",value:function(){return document.body.classList.contains("nightmode")}},{key:"resetRandomNode",value:function(t,e){var i=this._nodes[Math.floor(Math.random()*(this._nodes.length-1))];i.reset(this.canvas.width,this.canvas.height)}}]),e}();(new e).init()}();